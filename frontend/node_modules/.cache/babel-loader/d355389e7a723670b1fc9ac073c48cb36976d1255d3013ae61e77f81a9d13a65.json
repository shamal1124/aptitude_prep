{"ast":null,"code":"var _jsxFileName = \"F:\\\\proj\\\\shamal\\\\aptitude-prep-project\\\\frontend\\\\src\\\\pages\\\\Exam.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"../css/exam.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BACKEND = \"http://localhost:5000\";\nfunction shuffleArray(arr) {\n  const a = arr.slice();\n  for (let i = a.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [a[i], a[j]] = [a[j], a[i]];\n  }\n  return a;\n}\nconst Exam = () => {\n  _s();\n  const navigate = useNavigate();\n  const [showInstructions, setShowInstructions] = useState(true);\n  const [questions, setQuestions] = useState([]); // 30 questions for this exam\n  const [selected, setSelected] = useState([]); // user's selected answers (strings)\n  const [showQuestions, setShowQuestions] = useState(false);\n  const [timeLeft, setTimeLeft] = useState(1800); // default 30 minutes\n  const [showResult, setShowResult] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  // Fetch questions from backend on mount\n  useEffect(() => {\n    let mounted = true;\n    const fetchQuestions = async () => {\n      try {\n        const res = await fetch(`${BACKEND}/api/questions`);\n        if (!res.ok) throw new Error(`Server returned ${res.status}`);\n        const data = await res.json();\n        if (!mounted) return;\n\n        // Group by category\n        const byCategory = {\n          Reasoning: [],\n          Quantitative: [],\n          Verbal: []\n        };\n        data.forEach(q => {\n          const cat = q.category || 'General';\n          if (/reason/i.test(cat)) byCategory.Reasoning.push(q);else if (/quant/i.test(cat)) byCategory.Quantitative.push(q);else if (/verb/i.test(cat)) byCategory.Verbal.push(q);\n        });\n\n        // pick exactly n items from arr; if arr has fewer than n, fill remaining from `all` pool\n        const pickN = (arr, all, n) => {\n          const res = [];\n          const src = Array.isArray(arr) ? shuffleArray(arr) : [];\n          // take unique from category first\n          for (let i = 0; i < Math.min(n, src.length); i++) res.push(src[i]);\n          if (res.length === n) return res;\n          // need more: pick from `all` pool excluding already picked ids\n          const allShuffled = shuffleArray(all || []);\n          const pickedIds = new Set(res.map(it => it._id || it.id));\n          for (let i = 0; i < allShuffled.length && res.length < n; i++) {\n            const cand = allShuffled[i];\n            const cid = cand._id || cand.id;\n            if (!pickedIds.has(cid)) {\n              res.push(cand);\n              pickedIds.add(cid);\n            }\n          }\n          // If still short (very small DB), allow sampling with replacement from all\n          while (res.length < n) {\n            const idx = Math.floor(Math.random() * (all.length || 1));\n            res.push(all[idx]);\n          }\n          return res;\n        };\n        const allQuestions = data;\n        const r = pickN(byCategory.Reasoning, allQuestions, 10);\n        const q = pickN(byCategory.Quantitative, allQuestions, 10);\n        const v = pickN(byCategory.Verbal, allQuestions, 10);\n        console.log('[Exam] counts:', {\n          totalReturned: data.length,\n          reasoning: byCategory.Reasoning.length,\n          quantitative: byCategory.Quantitative.length,\n          verbal: byCategory.Verbal.length,\n          picked: {\n            r: r.length,\n            q: q.length,\n            v: v.length\n          }\n        });\n        const combined = shuffleArray([...r, ...q, ...v]).map(it => ({\n          id: it._id || Math.random().toString(36).slice(2, 9),\n          text: it.text || it.question || '',\n          options: it.options || [],\n          correctAnswer: it.correctAnswer || it.correct || null,\n          explanation: it.explanation || '',\n          category: it.category || ''\n        }));\n        setQuestions(combined);\n        setSelected(new Array(combined.length).fill(null));\n        setLoading(false);\n      } catch (err) {\n        console.error('Failed to load questions', err);\n        setError(err.message || 'Failed to load questions');\n        setLoading(false);\n      }\n    };\n    fetchQuestions();\n    return () => mounted = false;\n  }, []);\n\n  // Timer countdown\n  useEffect(() => {\n    let timer;\n    if (showQuestions && timeLeft > 0) {\n      timer = setInterval(() => setTimeLeft(prev => prev - 1), 1000);\n    } else if (showQuestions && timeLeft === 0) {\n      // auto submit when time up\n      handleSubmit();\n    }\n    return () => clearInterval(timer);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [showQuestions, timeLeft]);\n  const startExam = () => {\n    setShowInstructions(false);\n    setShowQuestions(true);\n    // reset timer to default 30 min\n    setTimeLeft(1800);\n  };\n  const handleSelect = (qIndex, option) => {\n    setSelected(prev => {\n      const copy = prev.slice();\n      copy[qIndex] = option;\n      return copy;\n    });\n  };\n  const handleSubmit = () => {\n    setShowQuestions(false);\n    setShowResult(true);\n  };\n  const handleRestart = () => {\n    // regenerate a new exam from already-fetched pool by re-running fetch\n    setLoading(true);\n    setShowResult(false);\n    setShowInstructions(true);\n    // refetch by forcing effect: simple approach - reload page or re-run fetch by re-mount; we'll re-run fetch by calling fetchQuestions inline\n    (async () => {\n      try {\n        const res = await fetch(`${BACKEND}/api/questions`);\n        if (!res.ok) throw new Error(`Server ${res.status}`);\n        const data = await res.json();\n        const byCategory = {\n          Reasoning: [],\n          Quantitative: [],\n          Verbal: []\n        };\n        data.forEach(q => {\n          const cat = q.category || 'General';\n          if (/reason/i.test(cat)) byCategory.Reasoning.push(q);else if (/quant/i.test(cat)) byCategory.Quantitative.push(q);else if (/verb/i.test(cat)) byCategory.Verbal.push(q);\n        });\n        // pick exactly n items from arr; if arr has fewer than n, sample with replacement\n        const pickN = (arr, n) => {\n          if (!Array.isArray(arr) || arr.length === 0) return [];\n          const res = [];\n          const shuffled = shuffleArray(arr);\n          for (let i = 0; i < Math.min(n, shuffled.length); i++) res.push(shuffled[i]);\n          while (res.length < n) {\n            const idx = Math.floor(Math.random() * arr.length);\n            res.push(arr[idx]);\n          }\n          return res;\n        };\n        const r = pickN(byCategory.Reasoning, 10);\n        const q = pickN(byCategory.Quantitative, 10);\n        const v = pickN(byCategory.Verbal, 10);\n        const combined = shuffleArray([...r, ...q, ...v]).map(it => ({\n          id: it._id || Math.random().toString(36).slice(2, 9),\n          text: it.text || it.question || '',\n          options: it.options || [],\n          correctAnswer: it.correctAnswer || it.correct || null,\n          explanation: it.explanation || '',\n          category: it.category || ''\n        }));\n        setQuestions(combined);\n        setSelected(new Array(combined.length).fill(null));\n        setLoading(false);\n      } catch (err) {\n        console.error('Restart fetch failed', err);\n        setError(err.message || 'Could not restart exam');\n        setLoading(false);\n      }\n    })();\n  };\n  const formatTime = secs => {\n    const m = Math.floor(secs / 60);\n    const s = secs % 60;\n    return `${m}:${s.toString().padStart(2, '0')}`;\n  };\n  const computeResults = () => {\n    let score = 0;\n    const details = questions.map((q, idx) => {\n      const userAns = selected[idx];\n      const correct = q.correctAnswer;\n      const isCorrect = userAns != null && String(userAns).trim() === String(correct).trim();\n      if (isCorrect) score += 1;\n      return {\n        question: q.text,\n        options: q.options,\n        selected: userAns,\n        correctAnswer: correct,\n        explanation: q.explanation,\n        isCorrect,\n        category: q.category\n      };\n    });\n    return {\n      score,\n      details\n    };\n  };\n\n  // Render\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"exam-container\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading questions...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 44\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 12\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"exam-container\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: 'red'\n        },\n        children: [\"Error: \", error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 44\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"exam-container\",\n    children: [showInstructions && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"popup instructions-popup\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Instructions\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        style: {\n          textAlign: 'left'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Total Questions: 30 (10 Reasoning, 10 Quantitative, 10 Verbal)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Each question is multiple-choice (MCQ)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [\"There is a timer: \", formatTime(timeLeft), \" (defaults to 30:00)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Click Submit to finish the exam early\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"ok-btn\",\n        onClick: startExam,\n        children: \"OK\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 9\n    }, this), showQuestions && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"questions-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"timer\",\n        children: [\"Time Remaining: \", formatTime(timeLeft)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 11\n      }, this), questions.map((q, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"question-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [idx + 1, \". \", q.text]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"options\",\n          children: q.options.map((opt, i) => {\n            const chosen = selected[idx] === opt;\n            return /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"option-btn\",\n              onClick: () => handleSelect(idx, opt),\n              style: {\n                backgroundColor: chosen ? '#c6f6d5' : undefined\n              },\n              children: opt\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 21\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 15\n        }, this)]\n      }, q.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 13\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'center',\n          marginTop: 12\n        },\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"submit-btn\",\n          onClick: handleSubmit,\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 9\n    }, this), showResult && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"popup result-popup\",\n      style: {\n        maxHeight: '85vh',\n        overflowY: 'auto',\n        width: '90%',\n        maxWidth: 900\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Exam Result\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 11\n      }, this), (() => {\n        const {\n          score,\n          details\n        } = computeResults();\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontWeight: 'bold'\n            },\n            children: [\"Score: \", score, \" / \", questions.length]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 12\n            },\n            children: details.map((d, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                borderBottom: '1px solid #eee',\n                padding: '8px 0'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: '600'\n                },\n                children: [idx + 1, \". \", d.question]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginTop: 6\n                },\n                children: d.options.map((opt, i) => {\n                  const isUser = d.selected === opt;\n                  const isCorrect = String(opt).trim() === String(d.correctAnswer).trim();\n                  const bg = isCorrect ? '#d4ffd4' : isUser ? '#ffd4d4' : 'transparent';\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      padding: '6px',\n                      background: bg,\n                      borderRadius: 6,\n                      marginBottom: 6\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: [String.fromCharCode(65 + i), \".\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 296,\n                      columnNumber: 31\n                    }, this), \" \", opt, isCorrect && /*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        marginLeft: 8,\n                        color: '#0b6e0b',\n                        fontWeight: 600\n                      },\n                      children: \"[Correct]\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 297,\n                      columnNumber: 45\n                    }, this), isUser && !isCorrect && /*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        marginLeft: 8,\n                        color: '#b00020',\n                        fontWeight: 600\n                      },\n                      children: \"[Your answer]\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 298,\n                      columnNumber: 56\n                    }, this)]\n                  }, i, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 295,\n                    columnNumber: 29\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 23\n              }, this), d.explanation && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginTop: 6,\n                  fontStyle: 'italic'\n                },\n                children: [\"Explanation: \", d.explanation]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 25\n              }, this)]\n            }, idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"result-buttons\",\n            style: {\n              marginTop: 16,\n              display: 'flex',\n              justifyContent: 'center',\n              gap: 12\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"restart-btn\",\n              onClick: handleRestart,\n              children: \"Restart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"home-btn\",\n              onClick: () => navigate('/dashboard'),\n              children: \"Home\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 15\n        }, this);\n      })()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 229,\n    columnNumber: 5\n  }, this);\n};\n_s(Exam, \"cK2moxMf8nl1QL7jkV6GPtI//yE=\", false, function () {\n  return [useNavigate];\n});\n_c = Exam;\nexport default Exam;\nvar _c;\n$RefreshReg$(_c, \"Exam\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","jsxDEV","_jsxDEV","BACKEND","shuffleArray","arr","a","slice","i","length","j","Math","floor","random","Exam","_s","navigate","showInstructions","setShowInstructions","questions","setQuestions","selected","setSelected","showQuestions","setShowQuestions","timeLeft","setTimeLeft","showResult","setShowResult","loading","setLoading","error","setError","mounted","fetchQuestions","res","fetch","ok","Error","status","data","json","byCategory","Reasoning","Quantitative","Verbal","forEach","q","cat","category","test","push","pickN","all","n","src","Array","isArray","min","allShuffled","pickedIds","Set","map","it","_id","id","cand","cid","has","add","idx","allQuestions","r","v","console","log","totalReturned","reasoning","quantitative","verbal","picked","combined","toString","text","question","options","correctAnswer","correct","explanation","fill","err","message","timer","setInterval","prev","handleSubmit","clearInterval","startExam","handleSelect","qIndex","option","copy","handleRestart","shuffled","formatTime","secs","m","s","padStart","computeResults","score","details","userAns","isCorrect","String","trim","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","color","textAlign","onClick","opt","chosen","backgroundColor","undefined","marginTop","maxHeight","overflowY","width","maxWidth","fontWeight","d","borderBottom","padding","isUser","bg","background","borderRadius","marginBottom","fromCharCode","marginLeft","fontStyle","display","justifyContent","gap","_c","$RefreshReg$"],"sources":["F:/proj/shamal/aptitude-prep-project/frontend/src/pages/Exam.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"../css/exam.css\";\r\n\r\nconst BACKEND = \"http://localhost:5000\";\r\n\r\nfunction shuffleArray(arr) {\r\n  const a = arr.slice();\r\n  for (let i = a.length - 1; i > 0; i--) {\r\n    const j = Math.floor(Math.random() * (i + 1));\r\n    [a[i], a[j]] = [a[j], a[i]];\r\n  }\r\n  return a;\r\n}\r\n\r\nconst Exam = () => {\r\n  const navigate = useNavigate();\r\n  const [showInstructions, setShowInstructions] = useState(true);\r\n  const [questions, setQuestions] = useState([]); // 30 questions for this exam\r\n  const [selected, setSelected] = useState([]); // user's selected answers (strings)\r\n  const [showQuestions, setShowQuestions] = useState(false);\r\n  const [timeLeft, setTimeLeft] = useState(1800); // default 30 minutes\r\n  const [showResult, setShowResult] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n\r\n  // Fetch questions from backend on mount\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    const fetchQuestions = async () => {\r\n      try {\r\n        const res = await fetch(`${BACKEND}/api/questions`);\r\n        if (!res.ok) throw new Error(`Server returned ${res.status}`);\r\n        const data = await res.json();\r\n\r\n        if (!mounted) return;\r\n\r\n        // Group by category\r\n        const byCategory = { Reasoning: [], Quantitative: [], Verbal: [] };\r\n        data.forEach((q) => {\r\n          const cat = q.category || 'General';\r\n          if (/reason/i.test(cat)) byCategory.Reasoning.push(q);\r\n          else if (/quant/i.test(cat)) byCategory.Quantitative.push(q);\r\n          else if (/verb/i.test(cat)) byCategory.Verbal.push(q);\r\n        });\r\n\r\n        // pick exactly n items from arr; if arr has fewer than n, fill remaining from `all` pool\r\n        const pickN = (arr, all, n) => {\r\n          const res = [];\r\n          const src = Array.isArray(arr) ? shuffleArray(arr) : [];\r\n          // take unique from category first\r\n          for (let i = 0; i < Math.min(n, src.length); i++) res.push(src[i]);\r\n          if (res.length === n) return res;\r\n          // need more: pick from `all` pool excluding already picked ids\r\n          const allShuffled = shuffleArray(all || []);\r\n          const pickedIds = new Set(res.map((it) => it._id || it.id));\r\n          for (let i = 0; i < allShuffled.length && res.length < n; i++) {\r\n            const cand = allShuffled[i];\r\n            const cid = cand._id || cand.id;\r\n            if (!pickedIds.has(cid)) {\r\n              res.push(cand);\r\n              pickedIds.add(cid);\r\n            }\r\n          }\r\n          // If still short (very small DB), allow sampling with replacement from all\r\n          while (res.length < n) {\r\n            const idx = Math.floor(Math.random() * (all.length || 1));\r\n            res.push(all[idx]);\r\n          }\r\n          return res;\r\n        };\r\n\r\n        const allQuestions = data;\r\n        const r = pickN(byCategory.Reasoning, allQuestions, 10);\r\n        const q = pickN(byCategory.Quantitative, allQuestions, 10);\r\n        const v = pickN(byCategory.Verbal, allQuestions, 10);\r\n\r\n        console.log('[Exam] counts:', {\r\n          totalReturned: data.length,\r\n          reasoning: byCategory.Reasoning.length,\r\n          quantitative: byCategory.Quantitative.length,\r\n          verbal: byCategory.Verbal.length,\r\n          picked: { r: r.length, q: q.length, v: v.length }\r\n        });\r\n\r\n        const combined = shuffleArray([...r, ...q, ...v]).map((it) => ({\r\n          id: it._id || Math.random().toString(36).slice(2, 9),\r\n          text: it.text || it.question || '',\r\n          options: it.options || [],\r\n          correctAnswer: it.correctAnswer || it.correct || null,\r\n          explanation: it.explanation || '',\r\n          category: it.category || '',\r\n        }));\r\n\r\n        setQuestions(combined);\r\n        setSelected(new Array(combined.length).fill(null));\r\n        setLoading(false);\r\n      } catch (err) {\r\n        console.error('Failed to load questions', err);\r\n        setError(err.message || 'Failed to load questions');\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchQuestions();\r\n    return () => (mounted = false);\r\n  }, []);\r\n\r\n  // Timer countdown\r\n  useEffect(() => {\r\n    let timer;\r\n    if (showQuestions && timeLeft > 0) {\r\n      timer = setInterval(() => setTimeLeft((prev) => prev - 1), 1000);\r\n    } else if (showQuestions && timeLeft === 0) {\r\n      // auto submit when time up\r\n      handleSubmit();\r\n    }\r\n    return () => clearInterval(timer);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [showQuestions, timeLeft]);\r\n\r\n  const startExam = () => {\r\n    setShowInstructions(false);\r\n    setShowQuestions(true);\r\n    // reset timer to default 30 min\r\n    setTimeLeft(1800);\r\n  };\r\n\r\n  const handleSelect = (qIndex, option) => {\r\n    setSelected((prev) => {\r\n      const copy = prev.slice();\r\n      copy[qIndex] = option;\r\n      return copy;\r\n    });\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    setShowQuestions(false);\r\n    setShowResult(true);\r\n  };\r\n\r\n  const handleRestart = () => {\r\n    // regenerate a new exam from already-fetched pool by re-running fetch\r\n    setLoading(true);\r\n    setShowResult(false);\r\n    setShowInstructions(true);\r\n    // refetch by forcing effect: simple approach - reload page or re-run fetch by re-mount; we'll re-run fetch by calling fetchQuestions inline\r\n    (async () => {\r\n      try {\r\n        const res = await fetch(`${BACKEND}/api/questions`);\r\n        if (!res.ok) throw new Error(`Server ${res.status}`);\r\n        const data = await res.json();\r\n        const byCategory = { Reasoning: [], Quantitative: [], Verbal: [] };\r\n        data.forEach((q) => {\r\n          const cat = q.category || 'General';\r\n          if (/reason/i.test(cat)) byCategory.Reasoning.push(q);\r\n          else if (/quant/i.test(cat)) byCategory.Quantitative.push(q);\r\n          else if (/verb/i.test(cat)) byCategory.Verbal.push(q);\r\n        });\r\n        // pick exactly n items from arr; if arr has fewer than n, sample with replacement\r\n        const pickN = (arr, n) => {\r\n          if (!Array.isArray(arr) || arr.length === 0) return [];\r\n          const res = [];\r\n          const shuffled = shuffleArray(arr);\r\n          for (let i = 0; i < Math.min(n, shuffled.length); i++) res.push(shuffled[i]);\r\n          while (res.length < n) {\r\n            const idx = Math.floor(Math.random() * arr.length);\r\n            res.push(arr[idx]);\r\n          }\r\n          return res;\r\n        };\r\n        const r = pickN(byCategory.Reasoning, 10);\r\n        const q = pickN(byCategory.Quantitative, 10);\r\n        const v = pickN(byCategory.Verbal, 10);\r\n        const combined = shuffleArray([...r, ...q, ...v]).map((it) => ({\r\n          id: it._id || Math.random().toString(36).slice(2, 9),\r\n          text: it.text || it.question || '',\r\n          options: it.options || [],\r\n          correctAnswer: it.correctAnswer || it.correct || null,\r\n          explanation: it.explanation || '',\r\n          category: it.category || '',\r\n        }));\r\n        setQuestions(combined);\r\n        setSelected(new Array(combined.length).fill(null));\r\n        setLoading(false);\r\n      } catch (err) {\r\n        console.error('Restart fetch failed', err);\r\n        setError(err.message || 'Could not restart exam');\r\n        setLoading(false);\r\n      }\r\n    })();\r\n  };\r\n\r\n  const formatTime = (secs) => {\r\n    const m = Math.floor(secs / 60);\r\n    const s = secs % 60;\r\n    return `${m}:${s.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  const computeResults = () => {\r\n    let score = 0;\r\n    const details = questions.map((q, idx) => {\r\n      const userAns = selected[idx];\r\n      const correct = q.correctAnswer;\r\n      const isCorrect = userAns != null && String(userAns).trim() === String(correct).trim();\r\n      if (isCorrect) score += 1;\r\n      return {\r\n        question: q.text,\r\n        options: q.options,\r\n        selected: userAns,\r\n        correctAnswer: correct,\r\n        explanation: q.explanation,\r\n        isCorrect,\r\n        category: q.category,\r\n      };\r\n    });\r\n    return { score, details };\r\n  };\r\n\r\n  // Render\r\n  if (loading) {\r\n    return <div className=\"exam-container\"><p>Loading questions...</p></div>;\r\n  }\r\n\r\n  if (error) {\r\n    return <div className=\"exam-container\"><p style={{ color: 'red' }}>Error: {error}</p></div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"exam-container\">\r\n      {/* Instructions modal */}\r\n      {showInstructions && (\r\n        <div className=\"popup instructions-popup\">\r\n          <h2>Instructions</h2>\r\n          <ul style={{ textAlign: 'left' }}>\r\n            <li>Total Questions: 30 (10 Reasoning, 10 Quantitative, 10 Verbal)</li>\r\n            <li>Each question is multiple-choice (MCQ)</li>\r\n            <li>There is a timer: {formatTime(timeLeft)} (defaults to 30:00)</li>\r\n            <li>Click Submit to finish the exam early</li>\r\n          </ul>\r\n          <button className=\"ok-btn\" onClick={startExam}>OK</button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Questions list */}\r\n      {showQuestions && (\r\n        <div className=\"questions-section\">\r\n          <div className=\"timer\">Time Remaining: {formatTime(timeLeft)}</div>\r\n          {questions.map((q, idx) => (\r\n            <div key={q.id} className=\"question-card\">\r\n              <h4>{idx + 1}. {q.text}</h4>\r\n              <div className=\"options\">\r\n                {q.options.map((opt, i) => {\r\n                  const chosen = selected[idx] === opt;\r\n                  return (\r\n                    <button\r\n                      key={i}\r\n                      className=\"option-btn\"\r\n                      onClick={() => handleSelect(idx, opt)}\r\n                      style={{ backgroundColor: chosen ? '#c6f6d5' : undefined }}\r\n                    >\r\n                      {opt}\r\n                    </button>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          ))}\r\n\r\n          <div style={{ textAlign: 'center', marginTop: 12 }}>\r\n            <button className=\"submit-btn\" onClick={handleSubmit}>Submit</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Result view */}\r\n      {showResult && (\r\n        <div className=\"popup result-popup\" style={{ maxHeight: '85vh', overflowY: 'auto', width: '90%', maxWidth: 900 }}>\r\n          <h2>Exam Result</h2>\r\n          {(() => {\r\n            const { score, details } = computeResults();\r\n            return (\r\n              <div>\r\n                <p style={{ fontWeight: 'bold' }}>Score: {score} / {questions.length}</p>\r\n\r\n                <div style={{ marginTop: 12 }}>\r\n                  {details.map((d, idx) => (\r\n                    <div key={idx} style={{ borderBottom: '1px solid #eee', padding: '8px 0' }}>\r\n                      <div style={{ fontWeight: '600' }}>{idx + 1}. {d.question}</div>\r\n                      <div style={{ marginTop: 6 }}>\r\n                        {d.options.map((opt, i) => {\r\n                          const isUser = d.selected === opt;\r\n                          const isCorrect = String(opt).trim() === String(d.correctAnswer).trim();\r\n                          const bg = isCorrect ? '#d4ffd4' : isUser ? '#ffd4d4' : 'transparent';\r\n                          return (\r\n                            <div key={i} style={{ padding: '6px', background: bg, borderRadius: 6, marginBottom: 6 }}>\r\n                              <strong>{String.fromCharCode(65 + i)}.</strong> {opt}\r\n                              {isCorrect && <span style={{ marginLeft: 8, color: '#0b6e0b', fontWeight: 600 }}>[Correct]</span>}\r\n                              {isUser && !isCorrect && <span style={{ marginLeft: 8, color: '#b00020', fontWeight: 600 }}>[Your answer]</span>}\r\n                            </div>\r\n                          );\r\n                        })}\r\n                      </div>\r\n                      {d.explanation && (\r\n                        <div style={{ marginTop: 6, fontStyle: 'italic' }}>Explanation: {d.explanation}</div>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n\r\n                <div className=\"result-buttons\" style={{ marginTop: 16, display: 'flex', justifyContent: 'center', gap: 12 }}>\r\n                  <button className=\"restart-btn\" onClick={handleRestart}>Restart</button>\r\n                  <button className=\"home-btn\" onClick={() => navigate('/dashboard')}>Home</button>\r\n                </div>\r\n              </div>\r\n            );\r\n          })()}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Exam;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}